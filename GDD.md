# DigiRide v2 — ゲームデザインドキュメント（GDD）

## フィットネス連動型デジタルモンスター育成ゲーム

**Version:** 2.0  
**Date:** 2026-02-22  
**Platform:** Android (React Native) / Web (PWA)  
**育成サイクル:** 7〜9日（基礎寿命）/ 1個体

---

## 1. コンセプト

### 1.1 エレベーターピッチ

歩いてエンカウント、鍛えて進化、食べて規律を上げる——現実の運動データがそのままゲームの心臓になるデジモン風育成バトルゲーム。寿命は7〜9日。1世代でワールド1をギリギリ攻略できるかどうかの緊張感。世代を重ね、装備を引き継ぎ、全8ワールドの制覇と図鑑コンプリートを目指す。

### 1.2 デザインの5本柱

| 柱 | 内容 |
|---|---|
| **歩数＝探索** | WP（歩数カウント）がエンカウントのゲート。歩かないと戦えない |
| **運動＝鍛錬** | RideMetricsのゾーン別データが低/中/高強度TPに変換される |
| **食事＝規律** | 自己申告の食事が規律パラメータとトレーニング効率に影響 |
| **自動バトル** | デジモン原作準拠。育成の質がそのまま戦闘結果に直結 |
| **世代の積み重ね** | 1世代は短く儚い。だが「記憶」が次世代に装備として継承される |

---

## 2. コアループ

```
┌─────────────────────────────────────────────────────────┐
│                     1日のサイクル                          │
│                                                           │
│  ◆ 朝のログイン                                          │
│    ├─ PMCボーナス付与（CTL/TSB基づく基礎TP）              │
│    ├─ 前日歩数によるWP加算                               │
│    ├─ RideMetrics新規ワークアウト → ゾーン別TP獲得        │
│    └─ 朝の食事質問 → 規律変動                            │
│                                                           │
│  ◆ 日中の活動                                            │
│    ├─ 歩行/階段 → WP蓄積（リアルタイム）                 │
│    ├─ WP消費 → モンスターとエンカウント → 自動バトル      │
│    ├─ TP消費 → トレーニング → ステータス上昇              │
│    └─ 昼の食事質問 → 規律変動                            │
│                                                           │
│  ◆ 夜の活動                                              │
│    ├─ 夜の食事質問 → 規律変動                            │
│    ├─ 状態確認・追加トレーニング                          │
│    └─ 寿命カウント進行                                   │
│                                                           │
│  ◆ 条件充足時                                             │
│    ├─ HP/ATK/DEF閾値達成＋ボス撃破 → 進化！              │
│    └─ 寿命到達 → 死亡 → 「記憶」装備生成 → 次世代        │
└─────────────────────────────────────────────────────────┘
```

---

## 3. 歩数カウント（WP）システム

### 3.1 WP獲得

| ソース | WP換算 | 取得方法 |
|--------|--------|---------|
| 歩数 | 1歩 = 1 WP | Health Connect API |
| 階段 | 1階 = 100 WP | Health Connect API |

**1日の想定WP:** 10,000歩 + 5階 = 10,500 WP/日

### 3.2 WPとエンカウント

WPは「ワールド内を移動する燃料」として消費される。一定WPを消費するとモンスターとエンカウントし、自動バトルが発生する。

#### ワールド1の設計基準

**制約条件:**
- 1日10,000WPペースで、**1週間（＝70,000WP）でボス到達がギリギリ可能**
- 全ワールド共通でこのペースを基準にする

#### エンカウント構造

| 要素 | ワールド1 | 設計意図 |
|------|----------|---------|
| ボス到達に必要な撃破数 | 15体 | 7日間で達成可能な数 |
| エンカウント1回のWP消費 | 3,000 WP | 1日3〜4戦ペース |
| ボス戦のWP消費 | 5,000 WP | 最終日の大半を消費 |
| 合計必要WP | 15×3,000 + 5,000 = **50,000 WP** | 5日分の歩数。探索＋失敗込みで7日 |
| エンカウント失敗率 | 20% | WP消費するがバトルなし（空振り） |
| 実質必要WP（失敗込み） | ≈ **62,500 WP** | 約6.3日分。階段ボーナス込みで7日 |

#### 全ワールド共通の計算式

```
各ワールドの必要撃破数 = 15体（固定）
エンカウントWP消費 = 3,000 WP（固定）
ボス戦WP消費 = 5,000 WP（固定）
エンカウント失敗率 = 20%（固定）
→ どのワールドも約7日分の歩数でボス到達可能
→ 難易度差は「敵の強さ」で表現し、WP消費量では差をつけない
```

---

## 4. モンスターパラメータ

### 4.1 基本ステータス

| パラメータ | 説明 | 範囲 |
|-----------|------|------|
| HP | 体力。バトルでの生存力 | モンスター種別ごとに上限設定 |
| ATK（攻撃） | 攻撃力。与ダメージ量 | モンスター種別ごとに上限設定 |
| DEF（防御） | 防御力。被ダメージ軽減 | モンスター種別ごとに上限設定 |
| 規律（DISC） | 命中率と回避率に微小補正 | 0〜100（平均50） |

### 4.2 規律パラメータ詳細

| 項目 | 内容 |
|------|------|
| 初期値 | 40〜60でランダム生成 |
| 日次変動要因 | PMCボーナスの大きさ + 前日の食事回数 |
| 変動計算 | 基礎変動 + ランダム補正（-3〜+3） |
| バトルへの影響 | 命中率: 基礎90% ± (DISC-50)×0.2% / 回避率: 基礎5% + (DISC-50)×0.1% |

#### 規律の日次変動テーブル

| PMCボーナスランク | 前日食事3回 | 前日食事2回 | 前日食事1回 | 前日食事0回 |
|-----------------|-----------|-----------|-----------|-----------|
| A（CTL≥80, TSB≤-15） | +5〜+8 | +3〜+6 | +1〜+3 | -1〜+1 |
| B（CTL≥65, TSB≤0） | +3〜+6 | +2〜+4 | 0〜+2 | -2〜0 |
| C（CTL≥50, TSB≤+15） | +1〜+4 | 0〜+2 | -1〜+1 | -3〜-1 |
| D（CTL<50 or TSB>+15） | 0〜+2 | -1〜+1 | -2〜0 | -4〜-2 |

---

## 5. トレーニングシステム

### 5.1 トレーニングポイント（TP）の3系統

| TP種別 | 対応ゾーン | 主効果 | 色 |
|--------|----------|--------|-----|
| 低強度TP (TP-L) | Z1〜Z2 | HP上昇しやすい | 🟢 緑 |
| 中強度TP (TP-M) | Z3〜Z4 | DEF上昇しやすい | 🟡 黄 |
| 高強度TP (TP-H) | Z5〜Z7 | ATK上昇しやすい | 🔴 赤 |

### 5.2 TP獲得: PMCボーナス（1日1回、朝ログイン時）

前日の歩数と現在のPMCに基づいて基礎TPを付与する。

#### PMCボーナス計算式

```
CTLボーナス = (clamp(CTL, 50, 100) - 50) / 50    // 0.0〜1.0
TSBボーナス = (15 - clamp(TSB, -30, 15)) / 45     // 0.0〜1.0（低いほど高い）
PMC係数 = 0.5 + (CTLボーナス × 0.7) + (TSBボーナス × 0.3)  // 0.5〜1.5

歩数係数 = min(前日歩数 / 10000, 1.5)             // 0〜1.5

基礎TP = floor(8 × PMC係数 × 歩数係数)
```

**配分:** 基礎TPは均等に3系統へ分配（端数はTP-Lへ）

#### PMCボーナスの具体例（Akihiroの実データ）

| CTL | TSB | PMC係数 | 前日歩数 | 歩数係数 | 基礎TP | 各系統 |
|-----|-----|--------|---------|---------|-------|--------|
| 52.8 | 6.3 | 0.5+0.04+0.06=0.60 | 10,000 | 1.0 | 4 | L:2, M:1, H:1 |
| 52.8 | -22.0 | 0.5+0.04+0.25=0.79 | 10,000 | 1.0 | 6 | L:2, M:2, H:2 |
| 60.0 | -5.0 | 0.5+0.14+0.13=0.77 | 12,000 | 1.2 | 7 | L:3, M:2, H:2 |
| 80.0 | -20.0 | 0.5+0.42+0.23=1.15 | 10,000 | 1.0 | 9 | L:3, M:3, H:3 |
| 90.0 | -30.0 | 0.5+0.56+0.30=1.36 | 15,000 | 1.5 | 16 | L:6, M:5, H:5 |

### 5.3 TP獲得: ワークアウトボーナス（RideMetrics連携）

新規ワークアウト検出時に、ゾーン別擬似TSSを算出してTPに変換。

#### ゾーン別擬似TSS計算式

```
各ゾーンのIF係数:
  Z1: 0.55   Z2: 0.75   Z3: 0.90   Z4: 1.00   Z5: 1.10   Z6: 1.20   Z7: 1.30

ゾーン別擬似TSS = (ゾーン滞在秒数 / 3600) × IF係数² × 100

低強度擬似TSS = Z1擬似TSS + Z2擬似TSS
中強度擬似TSS = Z3擬似TSS + Z4擬似TSS
高強度擬似TSS = Z5擬似TSS + Z6擬似TSS + Z7擬似TSS

TP-L += floor(低強度擬似TSS × 0.6)
TP-M += floor(中強度擬似TSS × 0.8)
TP-H += floor(高強度擬似TSS × 1.0)
```

#### ワークアウトTP計算の具体例（Akihiroの実データ）

**2/14 インターバルセッション（TSS=230, IF=0.84）**

| ゾーン | 秒数 | IF係数 | 擬似TSS | TP系統 |
|--------|------|--------|---------|--------|
| Z1 | 3616 | 0.55 | 30.4 | TP-L |
| Z2 | 3443 | 0.75 | 53.8 | TP-L |
| Z3 | 1548 | 0.90 | 34.8 | TP-M |
| Z4 | 1653 | 1.00 | 45.9 | TP-M |
| Z5 | 705 | 1.10 | 23.7 | TP-H |
| Z6 | 777 | 1.20 | 31.1 | TP-H |
| Z7 | 66 | 1.30 | 3.1 | TP-H |

| 系統 | 擬似TSS合計 | ×係数 | **獲得TP** |
|------|-----------|-------|----------|
| TP-L | 84.2 | ×0.6 | **50** |
| TP-M | 80.7 | ×0.8 | **64** |
| TP-H | 57.9 | ×1.0 | **57** |
| **合計** | | | **171** |

**2/17 VO2 30-30セッション（TSS=43, IF=0.91）**

| 系統 | 擬似TSS | ×係数 | **獲得TP** |
|------|---------|-------|----------|
| TP-L | 25.2 | ×0.6 | **15** |
| TP-M | 0.8 | ×0.8 | **0** |
| TP-H | 45.5 | ×1.0 | **45** |
| **合計** | | | **60** |

**2/21 60kmエンデュランス（TSS=97, IF=0.64）**

| 系統 | 擬似TSS | ×係数 | **獲得TP** |
|------|---------|-------|----------|
| TP-L | 90.5 | ×0.6 | **54** |
| TP-M | 21.7 | ×0.8 | **17** |
| TP-H | 1.8 | ×1.0 | **1** |
| **合計** | | | **72** |

### 5.4 トレーニングメニュー

TPを消費してステータスを上昇させる。各メニューは自転車トレーニングをモデルに命名。

| メニュー名 | TP-L | TP-M | TP-H | HP上昇 | ATK上昇 | DEF上昇 | 備考 |
|-----------|------|------|------|--------|---------|---------|------|
| LSD（ロング・スロー・ディスタンス） | 15 | 3 | 0 | +8〜12 | +0〜1 | +1〜3 | HP特化 |
| エンデュランス | 10 | 5 | 0 | +5〜8 | +1〜2 | +2〜4 | HP/DEFバランス |
| テンポ走 | 5 | 12 | 0 | +2〜4 | +1〜3 | +5〜8 | DEF特化 |
| スイートスポット | 3 | 10 | 3 | +2〜3 | +2〜4 | +4〜7 | DEF/ATKバランス |
| VO2maxインターバル | 0 | 5 | 12 | +1〜2 | +6〜10 | +1〜3 | ATK特化 |
| 無酸素スプリント | 0 | 2 | 15 | +0〜1 | +8〜12 | +0〜1 | ATK極振り |
| ヒルクライム | 5 | 8 | 5 | +3〜5 | +3〜5 | +3〜5 | 万能型 |
| レーススキル | 3 | 5 | 8 | +1〜3 | +5〜8 | +2〜4 | ATK寄り |

**食事ボーナス:** 当日食事済みの場合、トレーニングの上昇値に×1.1（端数切上げ）

### 5.5 究極体到達のバランスチェック

**設計制約: CTL90、週間TSS630程度の運動が必要**

CTL90・TSB-15の週間トレーニング想定（週5日ライド、TSS≈630/週）:

| 日 | セッション例 | TSS | TP-L | TP-M | TP-H | PMCボーナス |
|----|------------|-----|------|------|------|-----------|
| 1 | エンデュランス2h | 120 | 65 | 12 | 2 | +12 |
| 2 | テンポ+SST 1.5h | 110 | 20 | 55 | 10 | +12 |
| 3 | レスト | 0 | 0 | 0 | 0 | +12 |
| 4 | VO2maxインターバル | 90 | 15 | 8 | 50 | +12 |
| 5 | エンデュランス3h | 160 | 90 | 18 | 3 | +12 |
| 6 | SST+スプリント | 100 | 15 | 40 | 25 | +12 |
| 7 | レスト | 0 | 0 | 0 | 0 | +12 |
| **週合計** | | **580** | **205** | **133** | **90** | **84(=28×3)** |

**9日間（最大寿命）で:** TP-L≈290, TP-M≈186, TP-H≈130 + PMCボーナス≈108

この量で究極体に必要なステータスに到達可能かを逆算して進化条件を設定する（→ セクション6参照）。

---

## 6. 進化システム

### 6.1 進化段階

| 段階 | 名称 | 基礎HP | 基礎ATK | 基礎DEF | 上限HP | 上限ATK | 上限DEF |
|------|------|--------|---------|---------|--------|---------|---------|
| I | 幼年期I | 10 | 3 | 2 | 30 | 10 | 8 |
| II | 幼年期II | 25 | 8 | 6 | 80 | 25 | 20 |
| III | 成長期 | 60 | 20 | 15 | 200 | 60 | 50 |
| IV | 成熟期 | 150 | 45 | 35 | 500 | 140 | 120 |
| V | 完全体 | 350 | 100 | 80 | 1200 | 320 | 270 |
| VI | 究極体 | 800 | 230 | 190 | 3000 | 800 | 650 |

### 6.2 進化条件

進化には **ステータス閾値の達成** と **特定ワールドのボス撃破** の両方が必要。

| 進化 | HP条件 | ATK条件 | DEF条件 | ボス撃破条件 | 到達目安 |
|------|--------|---------|---------|------------|---------|
| 幼年期I → 幼年期II | ≥20 | ≥6 | ≥5 | なし | Day 1 |
| 幼年期II → 成長期 | ≥50 | ≥18 | ≥14 | W1ボス撃破 | Day 2〜3 |
| 成長期 → 成熟期 | ≥130 | ≥40 | ≥30 | W2ボス撃破 | Day 4〜5 |
| 成熟期 → 完全体 | ≥350 | ≥95 | ≥75 | W4ボス撃破 | Day 6〜7 |
| 完全体 → 究極体 | ≥800 | ≥220 | ≥180 | W6ボス撃破 | Day 8〜9(CTL90必須) |

### 6.3 進化分岐ルール

進化時の分岐先は、**累計で消費したTP-L / TP-M / TP-H の比率** とステータスバランスで決定。

| 条件 | 分岐タイプ | 例 |
|------|----------|-----|
| TP-L最多 | HP特化型（耐久型） | アグモン → グレイモン系 |
| TP-M最多 | DEF特化型（防御型） | ガブモン → ガルルモン系 |
| TP-H最多 | ATK特化型（攻撃型） | ギルモン → グラウモン系 |
| 3系統が均衡（各30%以上） | バランス型 | 特殊分岐（レア） |

### 6.4 進化ツリー（例）

```
幼年期I:  ボタモン ─── コロモン ─── プニモン
              │             │            │
幼年期II: トコモン ─── ツノモン ─── ギギモン
              │             │            │
         ┌────┤        ┌────┤       ┌────┤
成長期:  │ パタモン   │ ガブモン  │ ギルモン    ※他にアグモン、テントモン等
         │(HP型)     │(DEF型)   │(ATK型)
         │           │          │
成熟期:  │┌エンジェモン│┌ガルルモン│┌グラウモン   ※上位（ボス撃破＋ステ充足）
         ││(HP型)    ││(DEF型)  ││(ATK型)
         │└デビモン   │└氷デビモン│└メギドラモン  ※下位（ステ不足で妥協進化）
         │           │          │
完全体:  │┌Hエンジェモン│┌ワーガルルモン│┌メガログラウモン
         │└ファントモン │└サイバードラモン│└カオスデュークモン
         │             │               │
究極体:  └セラフィモン  └メタルガルルモン └デュークモン
         (HP究極)      (DEF究極)        (ATK究極)

         ※バランス型: オメガモン（全系統均衡で到達する隠し究極体）
```

**総モンスター数目標: 40〜50種**（敵専用含む）

---

## 7. バトルシステム

### 7.1 完全自動バトル

プレイヤーは「エンカウント」を選択するのみ。結果はステータス差と規律で決定。

#### ダメージ計算

```
基礎ダメージ = ATK × (0.85〜1.15 ランダム)
実ダメージ = max(1, 基礎ダメージ - DEF × 0.4)

命中率 = 90% + (自分DISC - 50) × 0.2%    // DISC 0で80%, DISC 100で100%
回避率 = 5% + (自分DISC - 50) × 0.1%     // DISC 0で0%, DISC 100で10%
クリティカル率 = 5%
クリティカル倍率 = 1.5×
```

#### バトルフロー

```
1. WP消費 → エンカウント判定（80%成功 / 20%空振り）
2. 成功 → 敵モンスター表示（ワールドの敵テーブルからランダム）
3. 先制判定: 自分SPDと敵SPDの差で先制確率決定
   ※SPDは(ATK+DEF)/4で近似（専用パラメータなし、装備補正あり）
4. ターン制自動戦闘（各ターンで命中判定→回避判定→ダメージ計算）
5. HP先に0になった方が敗北
6. 勝利 → 撃破カウント+1（ワールド進行）
7. 敗北 → HPが残り1になる（死亡はしない。連戦不能になるだけ）
```

### 7.2 HP回復

バトルで減ったHPは以下で回復:
- 時間経過: 1時間ごとに最大HPの10%自然回復
- 食事: 食事申告時にHP全回復
- トレーニング: トレーニング実行時にHP全回復

### 7.3 ワールド構成

#### ワールド進行ルール

| ルール | 内容 |
|-------|------|
| ワールド数 | 全8ワールド |
| ボス到達条件 | 15体のモブモンスター撃破 + ボス戦WP(5,000) |
| 難易度勾配 | 敵ステータスで難易度差を表現。WP消費は全ワールド共通 |
| ワールド選択 | 一度クリアしたワールドの次のワールドを選択可能（新規個体でも） |
| 敵モンスター | すべて図鑑に収録されているモンスター（敵専用種含む） |

#### ワールド別 敵ステータス目安

| ワールド | モブHP | モブATK | モブDEF | ボスHP | ボスATK | ボスDEF | 想定形態 |
|---------|-------|--------|--------|-------|--------|--------|---------|
| W1 | 15〜35 | 5〜12 | 3〜8 | 70 | 20 | 15 | 幼年期II |
| W2 | 40〜90 | 15〜30 | 10〜22 | 180 | 45 | 35 | 成長期序盤 |
| W3 | 80〜180 | 28〜55 | 20〜40 | 350 | 85 | 65 | 成長期終盤 |
| W4 | 160〜350 | 50〜100 | 40〜75 | 650 | 145 | 115 | 成熟期 |
| W5 | 300〜600 | 90〜170 | 70〜130 | 1000 | 250 | 200 | 成熟期終盤 |
| W6 | 500〜1000 | 150〜280 | 120〜220 | 1800 | 400 | 330 | 完全体 |
| W7 | 900〜1800 | 260〜480 | 210〜380 | 3200 | 700 | 560 | 完全体終盤 |
| W8 | 1600〜3000 | 450〜800 | 360〜620 | 5500 | 1100 | 900 | 究極体 |

**ワールド間の難易度接続:** W1ボスの強さ ≈ W2中盤のモブモンスター

### 7.4 1世代でのワールド攻略シミュレーション

**前提:** CTL≈53, 週3ライド, 1日10,000歩, 寿命8日

| Day | WP累計 | 戦闘数 | TP累計(L/M/H) | 推定HP/ATK/DEF | 形態 | ワールド進行 |
|-----|-------|-------|--------------|---------------|------|------------|
| 1 | 10,000 | 3 | 56/17/1 | 35/10/8 | 幼年期II | W1: 3/15撃破 |
| 2 | 20,000 | 3 | 112/34/2 | 55/18/14 | →成長期可能 | W1: 6/15 |
| 3 | 30,500 | 3+VO2 | 183/42/48 | 95/35/22 | 成長期 | W1: 9/15 |
| 4 | 41,000 | 3 | 237/53/49 | 120/42/28 | 成長期 | W1: 12/15 |
| 5 | 51,500 | 3 | 291/64/50 | 140/48/33 | 成長期 | W1: 15/15 |
| 6 | 57,000 | ボス戦 | 345/75/51 | 155/52/37 | 成長期 | **W1ボス挑戦** |
| 7 | 67,000 | — | 399/86/52 | 170/56/40 | 成長期 | W1クリアorリトライ |
| 8 | 77,000 | — | — | — | — | **寿命** |

→ **W1ボス(HP70, ATK20, DEF15)に成長期のステータスで挑む = ギリギリ勝てるか微妙**
→ 1世代目で確実にクリアするにはライドTPが潤沢に必要。これが「ギリギリ攻略できるかどうか」の設計意図に合致。

---

## 8. 食事・寿命・規律

### 8.1 食事システム

| 項目 | 内容 |
|------|------|
| 質問タイミング | 朝(6:00-10:00)、昼(11:00-14:00)、夜(17:00-21:00) |
| 質問内容 | 「健康的な食事をとりましたか？」→ Yes/No |
| Yesの効果 | モンスターに餌付与 → トレーニング効率×1.1 + 規律変動に好影響 |
| 寿命延長 | 1回の食事につき20%の確率で寿命+0.5日 |
| 1日最大食事回数 | 3回 |

### 8.2 寿命システム

| 項目 | 内容 |
|------|------|
| 基礎寿命 | 7〜9日（孵化時にランダム決定） |
| 寿命延長 | 食事で低確率延長（最大理論値: +4.5日 = 9食事×3×20%×0.5。期待値≈+2.7日） |
| 最大実質寿命 | 基礎9日 + 延長で約11〜12日が上限 |
| 死亡処理 | 寿命到達 → 「○○の記憶」装備品生成 → 次世代卵へ |

### 8.3 放置ペナルティ

| 放置時間 | 効果 |
|---------|------|
| 8時間以上ログインなし | 規律 -5〜-10 |
| 12時間以上ログインなし | 規律 -10〜-15、HP -20% |
| 24時間以上ログインなし | 規律 -20、HP -50%、満腹度0 |
| 48時間以上ログインなし | **死亡**（寿命に関係なく強制終了） |

---

## 9. 世代間引き継ぎ

### 9.1 「○○の記憶」装備品

| 項目 | 内容 |
|------|------|
| 名前 | 「(前世代モンスター名)の記憶」 |
| HP補正 | 前世代の最終HP（装備込み）× 20% |
| ATK補正 | 前世代の最終ATK（装備込み）× 20% |
| DEF補正 | 前世代の最終DEF（装備込み）× 20% |
| 有効期間 | **1世代のみ**（次の次の世代には引き継がれない） |
| 装備タイミング | 孵化直後から自動装備 |

### 9.2 世代間パワー計算例

**第1世代:** 成長期で寿命到達。最終ステ HP:170, ATK:56, DEF:40
→ 「アグモンの記憶」: HP+34, ATK+11, DEF+8

**第2世代:** 孵化時から装備込みでHP:44, ATK:14, DEF:10（幼年期Iの基礎+記憶）
→ W1のモブ(HP15〜35)に初日から互角以上で戦える
→ 第1世代よりテンポよくW1をクリアし、W2に挑戦可能

**第3世代:** 第2世代が成熟期で寿命到達。最終ステ HP:400, ATK:110, DEF:85
→ 「グレイモンの記憶」: HP+80, ATK+22, DEF+17
→ W2中盤から快適に攻略開始 → W3〜W4挑戦

**10世代目以降:** 装備が1世代限りなので無限増殖しないが、プレイヤーの運動レベル向上（CTL上昇）とゲーム知識の蓄積で徐々にワールドを進められる。

---

## 10. 実績/バッジシステム

### 10.1 図鑑

| 記録項目 | 内容 |
|---------|------|
| 個体名 | プレイヤーが命名 |
| 世代番号 | 第○世代 |
| 進化ルート | 全進化履歴 |
| 最終ステータス | HP/ATK/DEF/規律 |
| 寿命 | 生存日数 |
| 戦績 | 勝敗数、最高ワールド |
| TP消費累計 | L/M/H別 |
| 食事回数 | 総食事回数 |

### 10.2 バッジ

| カテゴリ | バッジ名 | 条件 |
|---------|---------|------|
| 歩数 | ファーストステップ | 累計10,000WP |
| 歩数 | マラソンウォーカー | 1日15,000WP |
| 歩数 | 階段マスター | 1日10階以上 |
| サイクリング | 初ライド | 初めてワークアウトTP獲得 |
| サイクリング | VO2maxウォリアー | 1セッションでTP-H 50以上 |
| サイクリング | CTLビルダー60 | CTL 60到達 |
| サイクリング | CTLビルダー80 | CTL 80到達 |
| サイクリング | CTLマスター90 | CTL 90到達 |
| サイクリング | アイアンレッグ | 週間TSS 500以上 |
| 育成 | 初進化 | 初めて成長期に到達 |
| 育成 | 完全体マスター | 完全体に到達 |
| 育成 | 究極の絆 | 究極体に到達 |
| 育成 | 皆勤賞 | 寿命期間中に毎日3食達成 |
| バトル | 初勝利 | 初めてバトルに勝利 |
| バトル | W1クリア〜W8クリア | 各ワールドボス撃破 |
| バトル | 無敗の王 | 1世代で10連勝 |
| 図鑑 | 10体収集〜全種コンプ | 図鑑登録数 |

---

## 11. 技術アーキテクチャ

### 11.1 システム構成

```
┌────────────────────────────────────────────────────┐
│                React Native App (Expo)              │
│                                                     │
│  ┌───────────┐ ┌───────────┐ ┌──────────────────┐  │
│  │ ゲームUI    │ │ 通知管理   │ │ データ同期サービス │  │
│  │(LCD風画面) │ │(食事催促)  │ │                  │  │
│  └─────┬─────┘ └─────┬─────┘ └────────┬─────────┘  │
│        │             │                │            │
│  ┌─────┴─────────────┴────────────────┴──────────┐ │
│  │              ゲームロジック層                     │ │
│  │  ・ステータス/規律計算  ・進化判定               │ │
│  │  ・自動バトルエンジン   ・WPエンカウント          │ │
│  │  ・TP換算(ゾーン別)    ・PMCボーナス計算         │ │
│  │  ・寿命管理            ・世代引き継ぎ            │ │
│  └─────┬──────────────────────┬──────────────────┘ │
│        │                      │                    │
│  ┌─────┴─────┐    ┌──────────┴──────────┐         │
│  │ ローカルDB  │    │  外部データ連携       │         │
│  │ (SQLite)   │    │                      │         │
│  │ ・図鑑     │    │ ┌──────────────────┐ │         │
│  │ ・世代履歴  │    │ │ Health Connect   │ │         │
│  │ ・装備     │    │ │ (歩数/階段)      │ │         │
│  │ ・バッジ   │    │ └──────────────────┘ │         │
│  └───────────┘    │ ┌──────────────────┐ │         │
│                    │ │ RideMetrics API  │ │         │
│                    │ │ (CTL/TSS/Zone)   │ │         │
│                    │ └──────────────────┘ │         │
│                    └─────────────────────┘         │
└────────────────────────────────────────────────────┘
```

### 11.2 技術スタック

| レイヤー | 技術 | 理由 |
|---------|------|------|
| フロントエンド | React Native + Expo | RideMetrics資産活用 |
| 状態管理 | Zustand | 軽量、ゲームステートに適合 |
| ローカルDB | expo-sqlite | 図鑑・世代データ永続化 |
| 歩数/階段 | react-native-health-connect | Android Health Connect |
| RideMetrics | MCP Server API | CTL/TSS/ゾーン取得 |
| 通知 | expo-notifications | 食事催促・世話催促 |
| ピクセルアート描画 | react-native-canvas / SVG | LCD風レンダリング |

### 11.3 データ同期タイミング

| イベント | 処理内容 |
|---------|---------|
| 朝のログイン（1日1回判定） | PMCボーナス計算＋付与、前日歩数WP加算、寿命カウント進行 |
| アプリ起動時 | Health Connect最新データ取得、RideMetrics新規ワークアウトチェック |
| バックグラウンド（15分毎） | 歩数WPリアルタイム加算 |
| 食事時間帯 | 通知＋食事質問 |
| ワークアウト検出時 | ゾーン別TP計算＋付与 |

---

## 12. 開発ロードマップ

### Phase 1: コアゲームループ（3週間）

- [ ] React Native + Expo プロジェクトセットアップ
- [ ] ローカルDB設計（SQLiteスキーマ）
- [ ] モンスターパラメータシステム（HP/ATK/DEF/規律）
- [ ] TPシステム（3系統、トレーニングメニュー）
- [ ] 自動バトルエンジン
- [ ] WPエンカウントシステム
- [ ] 進化システム（条件判定＋分岐）
- [ ] ピクセルアート: 幼年期I〜成長期（6体分）

### Phase 2: 運動データ連携（2週間）

- [ ] Health Connect統合（歩数・階段→WP）
- [ ] RideMetrics API連携（ゾーン別擬似TSS→TP計算）
- [ ] PMCボーナス計算ロジック
- [ ] 食事質問＋規律変動システム
- [ ] 通知システム（食事催促、世話催促）
- [ ] 寿命システム

### Phase 3: メタゲーム（2週間）

- [ ] ワールドシステム（全8ワールド、敵テーブル）
- [ ] 世代引き継ぎ（「記憶」装備生成）
- [ ] 図鑑システム
- [ ] 実績/バッジシステム
- [ ] ピクセルアート: 成熟期〜究極体（追加20体分）
- [ ] ワールド選択UI

### Phase 4: ポリッシュ（2週間）

- [ ] バトルアニメーション
- [ ] 進化演出
- [ ] サウンドエフェクト（Web Audio / expo-av）
- [ ] バランス調整（実データでプレイテスト）
- [ ] Android APKビルド・テスト
- [ ] PWA版ビルド

---

## 付録A: 用語集

| 用語 | 説明 |
|------|------|
| WP | 歩数カウント。1歩=1WP、1階=100WP。エンカウントの燃料 |
| TP-L / TP-M / TP-H | 低/中/高強度トレーニングポイント。RideMetrics連動 |
| DISC (規律) | 0〜100。命中率・回避率に影響。PMC＋食事で変動 |
| PMCボーナス | CTL/TSBから算出。朝ログイン時に基礎TP付与 |
| 擬似TSS | ゾーン別時間×IF係数²で算出するTP換算用の中間値 |
| CARE | 連続世話日数（前GDDから削除。規律パラメータに統合） |
| CTL | Chronic Training Load。RideMetricsのフィットネス指標 |
| TSB | Training Stress Balance。CTL-ATL。疲労と回復のバランス |
| TSS | Training Stress Score。1セッションの負荷量 |
| IF | Intensity Factor。FTPに対する強度比 |

## 付録B: 前版(v1)からの主要変更点

| 項目 | v1 | v2 |
|------|----|----|
| 通貨 | ゴールド＋TP | TP 3系統のみ（ゴールド撤廃） |
| 食事 | — | 自己申告制（朝昼晩）、トレーニング効率＋規律に影響 |
| 寿命 | なし（2週間サイクル） | 7〜9日基礎寿命、食事で延長可能 |
| バトル | NPC対戦、回数制限 | WP消費でエンカウント、全自動 |
| ワールド | なし | 全8ワールド、段階的攻略 |
| 進化条件 | EXP＋CARE日数 | HP/ATK/DEF閾値＋ボス撃破 |
| 規律 | なし | PMC＋食事で変動、命中/回避に影響 |
| 世代引き継ぎ | 累積ボーナス | 「記憶」装備（前世代20%、1世代限り） |
| ガチャ | あり | 撤廃 |
| 究極体条件 | TP累計500 | CTL90＋TSS630相当の運動が必要 |
