# CTLMonster (DigiRide) â€” ãƒ•ã‚£ãƒƒãƒˆãƒã‚¹é€£å‹•å‹ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼è‚²æˆã‚²ãƒ¼ãƒ 

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

æ­©æ•°ãƒ»éšæ®µãƒ‡ãƒ¼ã‚¿ã¨ã‚µã‚¤ã‚¯ãƒªãƒ³ã‚°ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ã‚’é€£æºã•ã›ãŸãƒ‡ã‚¸ãƒ¢ãƒ³é¢¨è‚²æˆãƒãƒˆãƒ«ã‚²ãƒ¼ãƒ ã€‚React Native (Expo) ã§ Android / Web (PWA) å¯¾å¿œã€‚

## ç¾åœ¨ã®é–‹ç™ºçŠ¶æ³

| ãƒ•ã‚§ãƒ¼ã‚º | çŠ¶æ…‹ | å†…å®¹ |
|---------|------|------|
| Phase 1: ã‚³ã‚¢ã‚¨ãƒ³ã‚¸ãƒ³ | âœ… å®Œäº† | å…¨ã‚¨ãƒ³ã‚¸ãƒ³ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å®Ÿè£…ãƒ»339ãƒ†ã‚¹ãƒˆé€šé |
| Phase 2: UI (LCDç”»é¢) | âœ… å®Œäº† | Expo Router + LCDæ¶²æ™¶é¢¨ãƒ¬ãƒˆãƒ­UI |
| Phase 3: å¤–éƒ¨é€£æº | âœ… å®Œäº† | Health Connect, RideMetrics, é€šçŸ¥ |
| Phase 4: ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ãƒ»æ‹¡å¼µ | âœ… å®Œäº† | ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼100â†’150ä½“, ãƒ¯ãƒ¼ãƒ«ãƒ‰8â†’10, ä¸–ä»£å±¥æ­´UI |
| ãƒãƒ©ãƒ³ã‚¹èª¿æ•´ | âœ… å®Œäº† | 20%é€²åŒ–ãƒ–ãƒ¼ã‚¹ãƒˆ, æ®µéšåˆ¥è¨“ç·´ä¿‚æ•°, è£…å‚™ãªã—é€²åŒ–åˆ¤å®š |
| Androidå®Ÿæ©Ÿå¯¾å¿œ | ğŸ”§ é€²è¡Œä¸­ | Health Connectæ¨©é™ä¿®æ­£æ¸ˆ, ç”»é¢ã‚µã‚¤ã‚ºèª¿æ•´ä¸­ |

### ç›´è¿‘ã®ã‚³ãƒŸãƒƒãƒˆå±¥æ­´

```
b02ca46 Fix LCD screen collapse: add flex:1 to screenBorder
4a1365f Full-screen LCD layout, Health Connect error feedback
d50389f Fix Health Connect crash: separate init from permission request
892aa67 Balance rewrite: 20% evo boost, equipment-free evolution, world rebalance
8bb172a Phase 4: Monster expansion 100â†’150, world expansion 8â†’10, history UI
```

### Androidå®Ÿæ©Ÿãƒ†ã‚¹ãƒˆçŠ¶æ³

- **ãƒ“ãƒ«ãƒ‰æ–¹æ³•**: `npx eas-cli build --profile preview --platform android --non-interactive`
- **EXPO_TOKEN**: `~/.bashrc` ã«è¨­å®šæ¸ˆã¿ï¼ˆã‚³ãƒãƒ³ãƒ‰ã«ç›´æ¥è¨˜è¼‰ä¸è¦ï¼‰
- **æ—¢çŸ¥ã®å•é¡Œ**:
  - Health Connect: `initializeHealthConnect()` ã¨ `requestHealthConnectPermissions()` ã‚’åˆ†é›¢æ¸ˆã¿ã€‚èµ·å‹•æ™‚ã¯ SDKåˆæœŸåŒ–ã®ã¿ã€æ¨©é™ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯è¨­å®šç”»é¢ã§æ˜ç¤ºçš„ã«ONã«ã—ãŸæ™‚ã®ã¿å®Ÿè¡Œã€‚ã‚¨ãƒ©ãƒ¼æ™‚ã¯UIè¡¨ç¤ºã‚ã‚Šã€‚
  - ç”»é¢ã‚µã‚¤ã‚º: LcdFrame ã‚’ flex:1 ã§ç”»é¢å…¨ä½“ã«æ‹¡å¤§æ¸ˆã¿ï¼ˆãƒ†ã‚¹ãƒˆçµæœå¾…ã¡ï¼‰
  - ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º: å…¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ ~1.4x ã«ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°æ¸ˆã¿

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **Runtime:** React Native + Expo SDK 54
- **Language:** TypeScript (strict mode)
- **State Management:** Zustand v5 (persist â†’ AsyncStorage)
- **Health Data:** react-native-health-connect v3.5.0
- **Training Data:** RideMetrics MCP Server (JSON-RPC 2.0)
- **Notifications:** expo-notifications
- **Animation:** react-native-reanimated
- **Testing:** Jest 30 + ts-jest (339ãƒ†ã‚¹ãƒˆ)
- **Build:** EAS Build (preview profile â†’ APK)

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
CTLMonster/
â”œâ”€â”€ CLAUDE.md                    # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ GDD.md                       # ã‚²ãƒ¼ãƒ ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆä»•æ§˜ã®çœŸå®Ÿã®æºæ³‰ï¼‰
â”œâ”€â”€ app.json                     # Expoè¨­å®š (Health Connectæ¨©é™, activity-alias pluginå«ã‚€)
â”œâ”€â”€ eas.json                     # EAS Build ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ« (development/preview/production)
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ plugins/
â”‚   â””â”€â”€ withHealthConnectPermissions.js  # Android 14+ HC activity-alias
â”‚
â”œâ”€â”€ app/                         # Expo Router (ç”»é¢é·ç§»)
â”‚   â”œâ”€â”€ _layout.tsx              # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”œâ”€â”€ index.tsx                # ãƒ¡ã‚¤ãƒ³è‚²æˆç”»é¢ + ã‚»ãƒ¼ãƒ–ã‚¹ãƒ­ãƒƒãƒˆé¸æŠ
â”‚   â”œâ”€â”€ battle.tsx               # ãƒãƒˆãƒ«ç”»é¢
â”‚   â”œâ”€â”€ training.tsx             # ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ç”»é¢
â”‚   â”œâ”€â”€ world-select.tsx         # ãƒ¯ãƒ¼ãƒ«ãƒ‰é¸æŠç”»é¢
â”‚   â”œâ”€â”€ encyclopedia.tsx         # å›³é‘‘ç”»é¢
â”‚   â”œâ”€â”€ status.tsx               # ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è©³ç´°ç”»é¢
â”‚   â”œâ”€â”€ settings.tsx             # è¨­å®šç”»é¢ (HC/RM toggle, SYNC, RESET)
â”‚   â”œâ”€â”€ allocate-tp.tsx          # TPæ‰‹å‹•é…åˆ†ç”»é¢
â”‚   â”œâ”€â”€ history.tsx              # ä¸–ä»£å±¥æ­´ä¸€è¦§
â”‚   â””â”€â”€ history-detail.tsx       # ä¸–ä»£è©³ç´°ç”»é¢
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ engine/                  # ã‚²ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆç´”ç²‹é–¢æ•°ã€UIã«ä¾å­˜ã—ãªã„ï¼‰
â”‚   â”‚   â”œâ”€â”€ battle.ts            # è‡ªå‹•ãƒãƒˆãƒ«ã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â”‚   â”œâ”€â”€ evolution.ts         # é€²åŒ–åˆ¤å®šãƒ»åˆ†å² (20%ãƒ–ãƒ¼ã‚¹ãƒˆ, è£…å‚™ãªã—åˆ¤å®š)
â”‚   â”‚   â”œâ”€â”€ training.ts          # ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å®Ÿè¡Œ (æ®µéšåˆ¥ä¿‚æ•° Ã—1.0ã€œÃ—2.0)
â”‚   â”‚   â”œâ”€â”€ discipline.ts        # è¦å¾‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å¤‰å‹•è¨ˆç®—
â”‚   â”‚   â”œâ”€â”€ lifespan.ts          # å¯¿å‘½ç®¡ç†ãƒ»é£Ÿäº‹åŠ¹æœ
â”‚   â”‚   â”œâ”€â”€ encounter.ts         # WPã‚¨ãƒ³ã‚«ã‚¦ãƒ³ãƒˆåˆ¤å®š (2,000WP/å›, ç©ºæŒ¯ã‚Šãªã—)
â”‚   â”‚   â”œâ”€â”€ pmc-bonus.ts         # PMCãƒœãƒ¼ãƒŠã‚¹è¨ˆç®— (PMC_BASE_TP=35)
â”‚   â”‚   â”œâ”€â”€ tp-calculator.ts     # ã‚¾ãƒ¼ãƒ³åˆ¥æ“¬ä¼¼TSSâ†’TPå¤‰æ›
â”‚   â”‚   â”œâ”€â”€ generation.ts        # ä¸–ä»£å¼•ãç¶™ãï¼ˆã€Œè¨˜æ†¶ã€è£…å‚™: æœ€çµ‚ã‚¹ãƒ†Ã—20%ï¼‰
â”‚   â”‚   â””â”€â”€ world.ts             # ãƒ¯ãƒ¼ãƒ«ãƒ‰é€²è¡Œç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ data/                    # é™çš„ãƒ‡ãƒ¼ã‚¿å®šç¾©
â”‚   â”‚   â”œâ”€â”€ monsters.ts          # 150ä½“ (Baby IÃ—4, IIÃ—7, RookieÃ—14, ChampionÃ—20, UltimateÃ—12, MegaÃ—8, EnemyÃ—34, +51æ‹¡å¼µ)
â”‚   â”‚   â”œâ”€â”€ worlds.ts            # W1ã€œW10 æ•µãƒ†ãƒ¼ãƒ–ãƒ«
â”‚   â”‚   â””â”€â”€ training-menus.ts    # 8ç¨®ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ¡ãƒ‹ãƒ¥ãƒ¼
â”‚   â”‚
â”‚   â”œâ”€â”€ store/                   # Zustand ã‚¹ãƒˆã‚¢
â”‚   â”‚   â”œâ”€â”€ game-store.ts        # ãƒ¡ã‚¤ãƒ³ã‚²ãƒ¼ãƒ ã‚¹ãƒ†ãƒ¼ãƒˆ (WP, TP, encounter, syncçŠ¶æ…‹)
â”‚   â”‚   â”œâ”€â”€ monster-store.ts     # ç¾åœ¨ã®ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼çŠ¶æ…‹
â”‚   â”‚   â”œâ”€â”€ world-store.ts       # ãƒ¯ãƒ¼ãƒ«ãƒ‰é€²è¡ŒçŠ¶æ…‹
â”‚   â”‚   â”œâ”€â”€ encyclopedia-store.ts # å›³é‘‘ãƒ»ä¸–ä»£å±¥æ­´ãƒ‡ãƒ¼ã‚¿
â”‚   â”‚   â”œâ”€â”€ settings-store.ts    # ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®š (HC/RM toggle, weight)
â”‚   â”‚   â”œâ”€â”€ slot-store.ts        # ã‚»ãƒ¼ãƒ–ã‚¹ãƒ­ãƒƒãƒˆç®¡ç† (3ã‚¹ãƒ­ãƒƒãƒˆ)
â”‚   â”‚   â”œâ”€â”€ storage.ts           # ã‚¹ãƒ­ãƒƒãƒˆåˆ¥AsyncStorageæ°¸ç¶šåŒ–
â”‚   â”‚   â””â”€â”€ migration.ts         # ãƒ¬ã‚¬ã‚·ãƒ¼ãƒ‡ãƒ¼ã‚¿ç§»è¡Œ
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                # å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿é€£æº
â”‚   â”‚   â”œâ”€â”€ health-connect.ts    # Health Connect API (åˆæœŸåŒ–ã¨Permissionåˆ†é›¢æ¸ˆã¿)
â”‚   â”‚   â”œâ”€â”€ ride-metrics.ts      # RideMetrics MCP Server API (JSON-RPC 2.0)
â”‚   â”‚   â”œâ”€â”€ notifications.ts     # é€šçŸ¥ç®¡ç†
â”‚   â”‚   â””â”€â”€ daily-sync.ts        # æœãƒ­ã‚°ã‚¤ãƒ³æ™‚ã®ä¸€æ‹¬åŒæœŸ + æ‰‹å‹•SYNC
â”‚   â”‚
â”‚   â”œâ”€â”€ components/              # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ lcd-screen/          # LCDæ¶²æ™¶é¢¨ãƒ¡ã‚¤ãƒ³ç”»é¢
â”‚   â”‚   â”‚   â”œâ”€â”€ LcdFrame.tsx     # ãƒ‡ãƒã‚¤ã‚¹ç­ä½“ãƒ•ãƒ¬ãƒ¼ãƒ  (flex:1 å…¨ç”»é¢)
â”‚   â”‚   â”‚   â”œâ”€â”€ MonsterSprite.tsx # ãƒ”ã‚¯ã‚»ãƒ«ã‚¢ãƒ¼ãƒˆãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
â”‚   â”‚   â”‚   â”œâ”€â”€ StatusBars.tsx   # HP/è¦å¾‹/å¯¿å‘½/TP/WPãƒãƒ¼
â”‚   â”‚   â”‚   â””â”€â”€ MenuButtons.tsx  # ãƒ¡ãƒ‹ãƒ¥ãƒ¼é¸æŠUI
â”‚   â”‚   â”œâ”€â”€ BattleAnimation.tsx  # ã‚¿ãƒ¼ãƒ³åˆ¶ãƒãƒˆãƒ«æ¼”å‡º (3ç§’/ã‚¿ãƒ¼ãƒ³)
â”‚   â”‚   â”œâ”€â”€ EvolutionScene.tsx   # é€²åŒ–æ¼”å‡º
â”‚   â”‚   â”œâ”€â”€ TrainingMenu.tsx     # ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é¸æŠUI
â”‚   â”‚   â”œâ”€â”€ MealPrompt.tsx       # é£Ÿäº‹è³ªå•ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
â”‚   â”‚   â”œâ”€â”€ WorldMap.tsx         # ãƒ¯ãƒ¼ãƒ«ãƒ‰é¸æŠãƒãƒƒãƒ—
â”‚   â”‚   â””â”€â”€ EncyclopediaGrid.tsx # å›³é‘‘ã‚°ãƒªãƒƒãƒ‰
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/                   # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”‚   â”‚   â”œâ”€â”€ useGameLoop.ts       # ãƒ¡ã‚¤ãƒ³ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—
â”‚   â”‚   â”œâ”€â”€ useDailySync.ts      # æœãƒ­ã‚°ã‚¤ãƒ³åˆ¤å®šãƒ»PMCãƒœãƒ¼ãƒŠã‚¹ä»˜ä¸
â”‚   â”‚   â”œâ”€â”€ useHealthData.ts     # Health Connect ãƒ‡ãƒ¼ã‚¿å–å¾— (5åˆ†ãƒãƒ¼ãƒªãƒ³ã‚°)
â”‚   â”‚   â””â”€â”€ useRideMetrics.ts    # RideMetrics ãƒ‡ãƒ¼ã‚¿å–å¾—
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                   # TypeScriptå‹å®šç¾©
â”‚   â”‚   â”œâ”€â”€ monster.ts           # MonsterDefinition, EvolutionStage
â”‚   â”‚   â”œâ”€â”€ battle.ts
â”‚   â”‚   â”œâ”€â”€ training.ts
â”‚   â”‚   â”œâ”€â”€ world.ts
â”‚   â”‚   â””â”€â”€ ride-metrics.ts
â”‚   â”‚
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ random.ts
â”‚       â”œâ”€â”€ clamp.ts
â”‚       â””â”€â”€ format.ts
â”‚
â””â”€â”€ __tests__/                   # ãƒ†ã‚¹ãƒˆ (20ã‚¹ã‚¤ãƒ¼ãƒˆ, 339ãƒ†ã‚¹ãƒˆ)
    â”œâ”€â”€ engine/                  # 16ã‚¹ã‚¤ãƒ¼ãƒˆ
    â”‚   â”œâ”€â”€ battle.test.ts
    â”‚   â”œâ”€â”€ evolution.test.ts
    â”‚   â”œâ”€â”€ training.test.ts
    â”‚   â”œâ”€â”€ tp-calculator.test.ts
    â”‚   â”œâ”€â”€ pmc-bonus.test.ts
    â”‚   â”œâ”€â”€ encounter.test.ts
    â”‚   â”œâ”€â”€ discipline.test.ts
    â”‚   â”œâ”€â”€ lifespan.test.ts
    â”‚   â”œâ”€â”€ generation.test.ts
    â”‚   â”œâ”€â”€ world.test.ts
    â”‚   â”œâ”€â”€ worlds.test.ts
    â”‚   â”œâ”€â”€ monsters.test.ts
    â”‚   â”œâ”€â”€ training-menus.test.ts
    â”‚   â”œâ”€â”€ death-rebirth.test.ts
    â”‚   â”œâ”€â”€ meal.test.ts
    â”‚   â””â”€â”€ balance-simulation.test.ts
    â”œâ”€â”€ services/
    â”‚   â”œâ”€â”€ ride-metrics.test.ts
    â”‚   â””â”€â”€ daily-sync.test.ts
    â””â”€â”€ store/
        â”œâ”€â”€ game-store.test.ts
        â””â”€â”€ slot-storage.test.ts
```

## ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„

### å…¨èˆ¬
- TypeScript strict mode å¿…é ˆ
- é–¢æ•°ã¯ã§ãã‚‹ã ã‘ç´”ç²‹é–¢æ•°ã«ã™ã‚‹ï¼ˆç‰¹ã« engine/ é…ä¸‹ï¼‰
- å‰¯ä½œç”¨ã¯ services/ ã¨ hooks/ ã«é›†ç´„
- ãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼ç¦æ­¢ã€‚å®šæ•°ã¯ data/ ã¾ãŸã¯ engine/ å†…ã® const ã§å®šç¾©

### ã‚²ãƒ¼ãƒ ã‚¨ãƒ³ã‚¸ãƒ³ (src/engine/)
- **UIã«ä¸€åˆ‡ä¾å­˜ã—ãªã„ã“ã¨**ã€‚React/React Native ã® import ç¦æ­¢
- å…¥åŠ›â†’å‡ºåŠ›ãŒæ˜ç¢ºãªç´”ç²‹é–¢æ•°ã§å®Ÿè£…
- å…¨é–¢æ•°ã«JSDocã‚³ãƒ¡ãƒ³ãƒˆï¼ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¬æ˜ã€è¨ˆç®—å¼ã®æ ¹æ‹ ï¼‰
- GDD.md ã®æ•°å€¤ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ãã®ã¾ã¾å®šæ•°ã¨ã—ã¦å®šç¾©

### çŠ¶æ…‹ç®¡ç† (src/store/)
- Zustand v5 ã® persist ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã§ AsyncStorage ã«æ°¸ç¶šåŒ–
- ã‚¹ãƒ­ãƒƒãƒˆåˆ¥æ°¸ç¶šåŒ–: `storage.ts` ã® `createSlotStorage(slotIndex)` ã§åˆ†é›¢
- ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šã¯ `globalStorage` ã§å…¨ã‚¹ãƒ­ãƒƒãƒˆå…±é€š

### ãƒ†ã‚¹ãƒˆ
- engine/ ã®å…¨é–¢æ•°ã«ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆå¿…é ˆ
- GDD.md ã®å…·ä½“ä¾‹ï¼ˆAkihiroã®å®Ÿãƒ‡ãƒ¼ã‚¿ï¼‰ã‚’ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã¨ã—ã¦ä½¿ç”¨
- ãƒãƒ©ãƒ³ã‚¹ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³: Monte Carlo 500 trials ã§å‹ç‡æ¤œè¨¼

### Health Connect (é‡è¦ãªæ³¨æ„ç‚¹)
- **`initializeHealthConnect()`**: SDKåˆæœŸåŒ–ã®ã¿ã€‚èµ·å‹•æ™‚ã«å®‰å…¨ã«å‘¼ã¹ã‚‹
- **`requestHealthConnectPermissions()`**: æ¨©é™ãƒªã‚¯ã‚¨ã‚¹ãƒˆã€‚Activityæº–å‚™å¾Œã®ã¿å‘¼ã¶ã“ã¨
- èµ·å‹•æ™‚ã« `requestPermission()` ã‚’å‘¼ã¶ã¨ `HealthConnectPermissionDelegate` ã® lateinit ãŒæœªåˆæœŸåŒ–ã§ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã™ã‚‹
- Jest ãƒ†ã‚¹ãƒˆã¯ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ãƒ­ãƒ¼ãƒ‰ã—ãªã„ãŸã‚ã€ã“ã®ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã¯æ¤œå‡ºã§ããªã„

## é‡è¦ãªè¨­è¨ˆåˆ¤æ–­ï¼ˆç¾è¡Œãƒãƒ©ãƒ³ã‚¹ï¼‰

### 1. WP â†’ ã‚¨ãƒ³ã‚«ã‚¦ãƒ³ãƒˆ
- 1æ­© = 1 WP, 1éš = 100 WP
- ãƒ©ã‚¤ãƒ‰: 1km = 200 WP, 1mç²å¾—æ¨™é«˜ = 5 WP
- **ã‚¨ãƒ³ã‚«ã‚¦ãƒ³ãƒˆ1å› = 2,000 WPæ¶ˆè²»ï¼ˆç©ºæŒ¯ã‚Šãªã—ï¼‰**
- ãƒœã‚¹åˆ°é”: ãƒ¯ãƒ¼ãƒ«ãƒ‰ã”ã¨ã«æ’ƒç ´æ•°è¨­å®š (W1: 5ä½“, W10: 20ä½“)

### 2. TP 3ç³»çµ± + PMCãƒœãƒ¼ãƒŠã‚¹
- Z1-Z2 â†’ TP-L (HPå‘ã), Z3-Z4 â†’ TP-M (DEFå‘ã), Z5-Z7 â†’ TP-H (ATKå‘ã)
- **PMC_BASE_TP = 35** (æœ1å›ã€CTL/TSBã‹ã‚‰åŸºç¤TPä»˜ä¸)
- æ®µéšåˆ¥è¨“ç·´ä¿‚æ•°: Ã—1.0 (BabyI) â†’ Ã—2.0 (Mega) ã§ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ä¸Šæ˜‡é‡ãŒå¢—åŠ 

### 3. é€²åŒ–æ¡ä»¶ = ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é–¾å€¤ã®ã¿ï¼ˆãƒœã‚¹æ’ƒç ´è¦ä»¶ãªã—ï¼‰
- **è£…å‚™ã‚’é™¤ã„ãŸ** ç´”ç²‹ãªãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã§åˆ¤å®š
- é€²åŒ–æ™‚: ç¾ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¨æ¬¡æ®µéšåŸºç¤å€¤ã®å·®åˆ†ã®20%ã‚’ãƒ–ãƒ¼ã‚¹ãƒˆ
- è£…å‚™ã¯ãƒãƒˆãƒ«ã®ã¿ã§åŠ ç®—

### 4. é€²åŒ–æ¡ä»¶ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆå®Ÿè£…å€¤ï¼‰
| é€²åŒ– | HP | ATK | DEF |
|------|-----|-----|-----|
| BabyIâ†’BabyII | â‰¥22 | â‰¥14 | â‰¥11 |
| BabyIIâ†’Rookie | â‰¥35 | â‰¥20 | â‰¥17 |
| Rookieâ†’Champion | â‰¥50 | â‰¥32 | â‰¥27 |
| Championâ†’Ultimate | â‰¥90 | â‰¥50 | â‰¥43 |
| Ultimateâ†’Mega | â‰¥180 | â‰¥100 | â‰¥85 |

### 5. ä¸–ä»£å¼•ãç¶™ã = ã€Œâ—‹â—‹ã®è¨˜æ†¶ã€è£…å‚™
- å‰ä¸–ä»£ã®æœ€çµ‚ã‚¹ãƒ†(è£…å‚™è¾¼ã¿) Ã— 20% ã®è£…å‚™å“ã‚’1ä¸–ä»£ã®ã¿å¼•ãç¶™ã

### 6. å¯¿å‘½
- åŸºç¤ 5ã€œ9æ—¥ï¼ˆæ­£è¦åˆ†å¸ƒçš„6æ®µéšãƒã‚±ãƒƒãƒˆï¼‰
- é£Ÿäº‹: æ¯é£Ÿç¢ºå®šå»¶é•· 0.03ã€œ0.25æ—¥ (æœŸå¾…å€¤0.112æ—¥/é£Ÿ)
- 48æ™‚é–“æ”¾ç½®ã§å¼·åˆ¶æ­»äº¡

### 7. ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çµæœ (50ä¸–ä»£Ã—10è©¦è¡Œ)
| CTL | åˆ°é”å½¢æ…‹ | W5ã‚¯ãƒªã‚¢ | W10ã‚¯ãƒªã‚¢ |
|-----|---------|---------|----------|
| 60 | Ultimate (G6.2) | G3.3 | â€” |
| 70 | Ultimate (G1.0) | â€” | â€” |
| 80 | Mega (G3.4) | G5.3 | G8.9 |
| 90 | Mega (G1.1) | â€” | G2.1 |

## RideMetrics MCP Server API

```typescript
// ãƒ•ã‚£ãƒƒãƒˆãƒã‚¹ã‚µãƒãƒªãƒ¼ï¼ˆPMCãƒœãƒ¼ãƒŠã‚¹è¨ˆç®—ç”¨ï¼‰
GET /training-summary?sport=cycling

// æœ€è¿‘ã®ãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¦ãƒˆï¼ˆã‚¾ãƒ¼ãƒ³åˆ¥TPè¨ˆç®—ç”¨ï¼‰
GET /recent-workouts?days=28&sport=cycling

// ãƒ‘ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ–ï¼ˆå°†æ¥ä½¿ç”¨äºˆå®šï¼‰
GET /power-curve?days=90&sport=cycling&weight=70.9
```

### MCP Server æ¥ç¶šè¨­å®š
```json
// .claude/settings.json
{
  "mcpServers": {
    "ride-metrics": {
      "url": "https://ride-metrics.vercel.app/api/mcp"
    }
  }
}
```

## é–‹ç™ºãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

å®Œäº†æ¸ˆã¿é …ç›®ã¨ä»Šå¾Œã®è¨ˆç”»ã¯ `memory/dev-roadmap.md` (Claude Code ãƒ¡ãƒ¢ãƒª) ã‚’å‚ç…§ã€‚
ä¸»è¦ãªæœªç€æ‰‹ã‚¿ã‚¹ã‚¯:

1. **Androidå®Ÿæ©Ÿãƒ†ã‚¹ãƒˆç¶™ç¶š** â€” ç”»é¢ã‚µã‚¤ã‚ºãƒ»Health Connect å‹•ä½œç¢ºèª
2. **åˆæœŸãƒœãƒ¼ãƒŠã‚¹WP (10,000) ã®å‰Šé™¤** â€” ãƒãƒ©ãƒ³ã‚¹å®‰å®šå¾Œã«å®Ÿæ–½
3. **EASãƒ­ãƒ¼ã‚«ãƒ«ãƒ“ãƒ«ãƒ‰å°å…¥** â€” ãƒ“ãƒ«ãƒ‰é »åº¦å¢—åŠ æ™‚
4. **å€‹åˆ¥ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚¹ãƒ—ãƒ©ã‚¤ãƒˆ** â€” ç¾åœ¨ã¯æ®µéšåˆ¥æ±ç”¨ã‚¹ãƒ—ãƒ©ã‚¤ãƒˆã®ã¿

## GDDå‚ç…§

å…¨ã¦ã®æ•°å€¤è¨­è¨ˆãƒ»ãƒãƒ©ãƒ³ã‚¹èª¿æ•´ã¯ `GDD.md` ã‚’çœŸå®Ÿã®æºæ³‰ï¼ˆSingle Source of Truthï¼‰ã¨ã™ã‚‹ã€‚
å®Ÿè£…ä¸­ã«æ•°å€¤ã®çŸ›ç›¾ã‚„ä¸æ˜ç‚¹ãŒã‚ã‚Œã°ã€GDD.md ã‚’å‚ç…§ã—ã€ãã‚Œã§ã‚‚ä¸æ˜ãªå ´åˆã¯è³ªå•ã™ã‚‹ã“ã¨ã€‚

**æ³¨æ„**: GDD.md ã®ä¸€éƒ¨æ•°å€¤ï¼ˆé€²åŒ–æ¡ä»¶ã€ã‚¨ãƒ³ã‚«ã‚¦ãƒ³ãƒˆé–¾å€¤ç­‰ï¼‰ã¯é–‹ç™ºä¸­ã®ãƒãƒ©ãƒ³ã‚¹èª¿æ•´ã§å¤‰æ›´ã•ã‚Œã¦ã„ã‚‹ã€‚å®Ÿè£…å€¤ã¯ä¸Šè¨˜ã€Œé‡è¦ãªè¨­è¨ˆåˆ¤æ–­ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŠã‚ˆã³ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰å†…ã®å®šæ•°ãŒæ­£ã€‚
